---
import { getEntry } from 'astro:content';

const profile = await getEntry('profile', 'main');
---

<section class="mb-[50px]">
  <h2 class="text-lg font-semibold text-white mb-5">Share</h2>
  <div class="grid grid-cols-2 gap-3 max-mobile:grid-cols-1">
    <button class="flex items-center justify-center gap-2 px-5 py-[14px] bg-gray-200 border border-gray-300 rounded-lg text-gray-700 text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-gray-300 hover:border-cyan hover:text-cyan hover:-translate-y-[2px] hover:shadow-[0_4px_12px_rgba(0,212,255,0.2)] active:translate-y-0" data-platform="x">
      <svg class="w-[18px] h-[18px] flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
      </svg>
      <span>X</span>
    </button>

    <button class="flex items-center justify-center gap-2 px-5 py-[14px] bg-gray-200 border border-gray-300 rounded-lg text-gray-700 text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-gray-300 hover:border-cyan hover:text-cyan hover:-translate-y-[2px] hover:shadow-[0_4px_12px_rgba(0,212,255,0.2)] active:translate-y-0" data-platform="line">
      <svg class="w-[18px] h-[18px] flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
        <path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/>
      </svg>
      <span>LINE</span>
    </button>

    <button class="flex items-center justify-center gap-2 px-5 py-[14px] bg-gray-200 border border-gray-300 rounded-lg text-gray-700 text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-gray-300 hover:border-cyan hover:text-cyan hover:-translate-y-[2px] hover:shadow-[0_4px_12px_rgba(0,212,255,0.2)] active:translate-y-0" data-platform="email">
      <svg class="w-[18px] h-[18px] flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
        <path d="m22 6-10 7L2 6"/>
      </svg>
      <span>Email</span>
    </button>

    <button class="flex items-center justify-center gap-2 px-5 py-[14px] bg-gray-200 border border-gray-300 rounded-lg text-gray-700 text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-gray-300 hover:border-cyan hover:text-cyan hover:-translate-y-[2px] hover:shadow-[0_4px_12px_rgba(0,212,255,0.2)] active:translate-y-0" data-platform="threads">
      <svg class="w-[18px] h-[18px] flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12.186 3.076c-1.924 0-3.597.606-4.878 1.754C5.93 6.025 5.096 7.677 5.096 9.762c0 1.014.187 1.94.552 2.735.364.794.895 1.464 1.572 1.981a6.86 6.86 0 002.385 1.139c.883.23 1.849.345 2.851.345 1.924 0 3.597-.606 4.878-1.754 1.378-1.247 2.212-2.899 2.212-4.984 0-1.014-.187-1.94-.552-2.735a5.896 5.896 0 00-1.572-1.981 6.86 6.86 0 00-2.385-1.139c-.883-.23-1.849-.345-2.851-.345zm0 13.848c-2.329 0-4.357-.736-5.911-2.127C4.72 13.406 3.768 11.325 3.768 8.838c0-2.487.952-4.568 2.507-5.959C7.829 1.488 9.857.752 12.186.752c2.329 0 4.357.736 5.911 2.127 1.555 1.391 2.507 3.472 2.507 5.959 0 2.487-.952 4.568-2.507 5.959-1.554 1.391-3.582 2.127-5.911 2.127z"/>
        <path d="M12 8.5c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5z"/>
      </svg>
      <span>Threads</span>
    </button>
  </div>
</section>

<script define:vars={{ url: profile.data.url, title: profile.data.title }}>
  const shareButtons = document.querySelectorAll('button[data-platform]');

  shareButtons.forEach(button => {
    button.addEventListener('click', () => {
      const platform = button.getAttribute('data-platform');
      const text = encodeURIComponent(title);
      const shareUrl = encodeURIComponent(url);

      switch (platform) {
        case 'x':
          window.open(`https://x.com/intent/tweet?text=${text}&url=${shareUrl}`, '_blank', 'width=600,height=400');
          break;
        case 'line':
          window.open(`https://social-plugins.line.me/lineit/share?url=${shareUrl}`, '_blank', 'width=600,height=400');
          break;
        case 'email':
          window.location.href = `mailto:?subject=${text}&body=${shareUrl}`;
          break;
        case 'threads':
          window.open(`https://threads.net/intent/post?text=${text}%20${shareUrl}`, '_blank', 'width=600,height=400');
          break;
      }
    });
  });
</script>
